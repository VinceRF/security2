<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script>
        $(document).ready(function () {
            getMessages();
        })

        // 게시글을 불러옵니다.
        function getMessages() {
            $('#cards-box').empty();
            let idx = location.href.split("boardId=")[1]; //localhost/detail.html?boardId=12
            $.ajax({
                type: "GET",
                url: `/api/contents/${idx}`,
                data: {},
                success: function (response) {
                    let board = response;
                    let boardId = board.boardId;
                    let writer = board.writer;
                    let title = board.title;
                    let contents = board.contents;
                    let modifiedAt = board.modifiedAt;
                    addHTML(boardId, writer, title, contents, modifiedAt);
                }
            });
        }

        // 불러온 게시글을 html에 붙여줍니다.
        function addHTML(boardId, writer, title, contents, modifiedAt) {
            let tempHtml = makeMessage(boardId, writer, title, contents, modifiedAt);
            $('#cards-box').append(tempHtml);
        }

        // 게시글 형태를 만들어줍니다.
        function makeMessage(boardId, writer, title, contents, modifiedAt) {
            return `<div class="card">
                        <div class="metadata">
                           <div id="${boardId}-writer">
                               ${writer}
                           </div>
                           <div class="date">
                               ${modifiedAt}
                           </div>
                        </div>
                    <h2 class='title' id="${boardId}-title">"${title}"</h2>
                        <div class="contents" id="${boardId}-contents" >
                           ${contents}
                        </div>
                    </div>`;
        }

    </script>
</head>
<body>
<div id="cards-box">

</div>

</body>
</html>